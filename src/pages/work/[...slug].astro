---
import { getCollection } from "astro:content";
import ClientItemLayout from "@/layouts/ClientItemLayout.astro";

export async function getStaticPaths() {
  const workEntries = await getCollection("work");
  return workEntries.map(work => ({
    params: { slug: work.slug },
    props: { work },
    // Provide an alternative route under /clients
    // Astro will generate /work/[slug] by default; we will relocate the folder next
  }));
}

const { work } = Astro.props;
const { Content } = await work.render();
---

<ClientItemLayout
  frontmatter={{
    title: work.data.title,
    challenge: work.data.challenge,
    solution: work.data.solution,
  }}
  {work}
>
  <Content />
</ClientItemLayout>
